# 任务管理系统使用指南

## 概述

本系统为S-100海事Web服务平台提供了一个完整的任务管理解决方案，包括任务文件夹结构、标准化模板、自动提交工具集成和任务跟踪功能。

## 系统特性

### 1. 智能自动提交
- 自动读取当前任务信息
- 生成包含任务摘要的提交信息
- 显示任务进度和子任务完成情况
- 替代原有的通用"Auto-fix: 自动修复和改进"提交信息

### 2. 标准化任务模板
- **标准任务模板**: 适用于一般性任务
- **功能任务模板**: 适用于新功能开发
- **Bug修复模板**: 适用于问题修复

### 3. 完整的任务生命周期管理
- 任务创建、进度跟踪、完成归档
- 任务状态管理（pending、in_progress、completed、blocked、cancelled）
- 任务统计和报告

### 4. 命令行工具
- 简单易用的命令行接口
- 与现有开发流程无缝集成

## 文件夹结构

```
development/tasks/
├── active/                    # 当前进行中的任务
│   └── YYYY-MM-DD_id_name.md
├── completed/                 # 已完成的任务
│   └── YYYY-MM-DD_id_name_completed.md
├── templates/                 # 任务模板
│   ├── standard-task-template.md
│   ├── feature-task-template.md
│   └── bugfix-task-template.md
├── archive/                   # 归档的任务
├── current-task.json          # 当前活跃任务记录
├── task-stats.json           # 任务统计信息
└── README.md                  # 系统说明文档
```

## 使用方法

### 1. 创建新任务

```bash
# 创建新任务
npm run task:create "任务名称" "任务描述" "任务类型" "优先级"

# 示例
npm run task:create "优化数据库查询性能" "提升用户数据查询速度" "optimization" "high"
npm run task:create "修复登录页面样式问题" "登录按钮在移动端显示异常" "bugfix" "medium"
npm run task:create "实现用户管理功能" "添加用户增删改查功能" "feature" "high"
```

### 2. 查看当前任务

```bash
# 查看当前活跃任务
npm run task:current
```

### 3. 列出任务

```bash
# 列出活跃任务
npm run task:list

# 列出已完成任务
npm run task:list completed
```

### 4. 完成任务

```bash
# 完成指定任务
npm run task:complete <任务ID>

# 示例
npm run task:complete 001
```

### 5. 查看任务统计

```bash
# 查看任务统计信息
npm run task:stats
```

### 6. 自动提交（集成任务信息）

```bash
# 执行自动提交（会自动读取当前任务信息）
npm run commit
```

## 任务模板详解

### 标准任务模板
适用于一般性任务，包含基本信息、目标、技术要求、实施步骤等基本字段。

### 功能任务模板
适用于新功能开发，包含用户故事、技术设计、API设计、前端设计、测试用例等详细字段。

### Bug修复模板
适用于问题修复，包含问题描述、复现步骤、环境信息、根因分析、修复方案、测试验证等字段。

## 自动提交工具集成

### 提交信息格式
当存在当前任务时，自动提交工具会生成如下格式的提交信息：

```
🚀 任务名称 (进度) - 时间戳

📋 任务ID: [ID]
🎯 任务描述: [描述]
📊 进度: [百分比]%
📝 子任务完成情况:
   ✅ 已完成子任务1
   ⏳ 进行中子任务2

📁 修改文件:
   - 文件路径1
   - 文件路径2

🤖 Generated with [Claude Code](https://claude.ai/code)
Co-Authored-By: Claude <noreply@anthropic.com>
```

### 任务图标
- 🚀 功能开发
- 🐛 Bug修复
- ⚡ 性能优化
- 📚 文档编写
- 🔧 维护任务
- 🧪 测试任务

## 工作流程

### 1. 开始新任务
```bash
# 创建任务
npm run task:create "实现新功能" "功能描述" "feature" "high"

# 系统会自动：
# - 创建任务文件
# - 更新当前任务记录
# - 生成标准化任务文档
```

### 2. 开发过程中
```bash
# 查看当前任务
npm run task:current

# 编辑任务文件，更新进度
# 手动编辑 development/tasks/active/ 中的任务文件

# 提交代码（自动包含任务信息）
npm run commit
```

### 3. 完成任务
```bash
# 完成任务
npm run task:complete <任务ID>

# 系统会自动：
# - 移动任务到completed文件夹
# - 清除当前任务记录
# - 更新任务统计
```

## 最佳实践

### 1. 任务创建
- 使用清晰、具体的任务名称
- 提供详细的任务描述
- 选择合适的任务类型和优先级
- 设置合理的预期完成时间

### 2. 任务维护
- 定期更新任务进度
- 记录遇到的问题和解决方案
- 及时更新任务状态
- 保持任务文档的完整性

### 3. 任务完成
- 确保所有验收标准都已满足
- 记录实际工时和学到的经验
- 提供后续改进建议
- 完成任务总结

### 4. 团队协作
- 使用统一的任务格式
- 保持任务信息的及时更新
- 定期同步任务进度
- 共享经验和最佳实践

## 高级功能

### 1. 任务统计
系统会自动生成以下统计信息：
- 总任务数、活跃任务数、已完成任务数
- 任务完成率
- 优先级分布
- 任务类型分布
- 最近活动记录

### 2. 任务搜索
任务文件使用标准化的命名格式，支持按日期、ID、名称进行搜索。

### 3. 任务归档
定期将旧任务移动到archive文件夹，保持active和completed文件夹的整洁。

## 故障排除

### 1. 任务文件格式错误
确保任务文件遵循模板格式，特别是必需的字段如任务ID、名称、状态等。

### 2. 自动提交失败
检查current-task.json文件是否存在且格式正确，确保有写入权限。

### 3. 命令行工具错误
检查Node.js版本，确保所有依赖已正确安装。

## 扩展建议

### 1. Web界面
可以开发Web界面来管理任务，提供更好的用户体验。

### 2. 集成项目管理工具
可以集成JIRA、Trello等项目管理工具，实现双向同步。

### 3. 自动化报告
可以添加定期生成任务报告的功能，支持多种格式输出。

### 4. 团队协作功能
可以添加任务分配、评论、通知等团队协作功能。

## 总结

任务管理系统为S-100海事Web服务平台提供了完整的任务管理解决方案，通过标准化的流程和工具集成，提高了开发效率和代码质量。系统设计简洁易用，同时具备良好的扩展性，能够满足团队不断发展的需求。

通过使用本系统，开发团队可以：
- 更好地跟踪和管理开发任务
- 提高代码提交的信息质量
- 积累项目经验和最佳实践
- 优化开发流程和团队协作